<aura:component description="Table" controller="HelpController"  implements="force:appHostable,flexipage:availableForAllPageTypes,flexipage:availableForRecordHome,force:hasRecordId,forceCommunity:availableForAllPageTypes,force:lightningQuickAction">

    <aura:attribute name="sortField" type="String" Default="Name" />
    <aura:attribute name="sortAsc" type="Boolean" Default="false" />
    <aura:attribute name="accounts" type="List" Default="[]" />

    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>

    <table class="slds-table slds-table--bordered slds-table--cell-buffer" style="margin-top:50px;">
        <thead>
        <tr class="slds-text-heading--label">
            <th scope="col">
                <div onclick="{!c.sortByName}"
                     class="slds-truncate"
                     title="Account Name">
                    Account Name
                    <aura:if isTrue="{!v.sortField=='Name'}">
                            <span>
                                <aura:if isTrue="{!v.sortAsc}">
                                    &#8593;
                                    <aura:set attribute="else">
                                        &#8595;
                                    </aura:set>
                                </aura:if>
                            </span>
                    </aura:if>
                </div>
            </th>
            <th scope="col">
                <div  onclick="{!c.sortByIndustry}" class="slds-truncate" title="Industry">Industry
                    <aura:if isTrue="{!v.sortField=='Industry'}">
                            <span>
                                <aura:if isTrue="{!v.sortAsc}">
                                    &#8593;
                                    <aura:set attribute="else">
                                        &#8595;
                                    </aura:set>
                                </aura:if>
                            </span>
                    </aura:if>
                </div>
            </th>
            <th scope="col">
                <div  onclick ="{!c.sortByAnnualRevenue}" class="slds-truncate" title="Annual Revenue">Annual Revenue
                    <aura:if isTrue="{!v.sortField=='AnnualRevenue'}">
                            <span>
                                <aura:if isTrue="{!v.sortAsc}">
                                    &#8593;
                                    <aura:set attribute="else">
                                        &#8595;
                                    </aura:set>
                                </aura:if>
                            </span>
                    </aura:if>
                </div>
            </th>
        </tr>
        </thead>
<tbody>
    <lightning:accordion>
        <aura:iteration items="{!v.accounts}" var="acc">
            <aura:iteration items="{!acc.Contacts}" var="con">
                <tr class="slds-text-title--caps">
                    <td scope="row">
                        <div class="slds-truncate">
                            <lightning:accordionsection name="{!acc.Name}" label="{!acc.Name}">
                                <aura:set attribute="body">
                                <p><b>contact Name :  {!con.Name}</b></p>
                                <p><b>contact Email :  {!con.Email}</b></p>
                                <p><b>contact Phone :  {!con.Phone}</b></p>
                                <p><b>contact MailingCity :{!con.MailingCity}</b></p>
                                </aura:set>
                            </lightning:accordionsection>
                        </div>
                    </td>
                    <td scope="row">
                        <div class="slds-truncate" title="Industry">
                            {!acc.Industry}
                        </div>
                    </td>
                    <td scope="row">
                        <div class="slds-truncate" title="Annual Revenue">
                            {!acc.AnnualRevenue}
                        </div>
                    </td>
                </tr>
            </aura:iteration>
        </aura:iteration>
    </lightning:accordion>
</tbody>
    </table>
</aura:component>
